!function(t){"use strict";var e,r,a=t();t.fn.sortable=function(s){var i=String(s);return s=t.extend({connectWith:!1,placeholder:null,dragImage:null},s),this.each(function(){var n,d=t(this).children(s.items),o=s.handle?d.find(s.handle):d;if("reload"===i&&(t(this).children(s.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),t(this).off("dragover.h5s dragenter.h5s drop.h5s")),/^enable|disable|destroy$/.test(i)){var h=t(this).children(t(this).data("items")).attr("draggable","enable"===i);return t(this).attr("aria-dropeffect",/^disable|destroy$/.test(i)?"none":"move"),void("destroy"===i&&(t(this).off("sortstart sortupdate"),t(this).removeData("opts"),h.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s dragover.h5s dragenter.h5s drop.h5s").off("sortupdate"),o.off("selectstart.h5s")))}var l=t(this).data("opts");"undefined"==typeof l?t(this).data("opts",s):s=l;var g,f,c=null===s.placeholder?t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder"/>'):t(s.placeholder).addClass("sortable-placeholder");t(this).data("items",s.items),a=a.add(c),s.connectWith&&t(s.connectWith).add(this).data("connectWith",s.connectWith),d.attr("role","option"),d.attr("aria-grabbed","false"),o.attr("draggable","true").not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end(),d.on("dragstart.h5s",function(a){a.stopImmediatePropagation();var i=a.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("text",""),s.dragImage&&i.setDragImage&&i.setDragImage(s.dragImage,0,0),n=(e=t(this)).addClass("sortable-dragging").attr("aria-grabbed","true").index(),r=e.outerHeight(),g=t(this).parent(),e.parent().triggerHandler("sortstart",{item:e,startparent:g})}).on("dragend.h5s",function(){e&&(e.removeClass("sortable-dragging").attr("aria-grabbed","false").show(),a.detach(),f=t(this).parent(),n===e.index()&&g.get(0)===f.get(0)||e.parent().triggerHandler("sortupdate",{item:e,oldindex:n,startparent:g,endparent:f}),e=null,r=null)}).add([this,c]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){if(!d.is(e)&&s.connectWith!==t(e).parent().data("connectWith"))return!0;if("drop"===i.type)return i.stopPropagation(),a.filter(":visible").after(e),e.trigger("dragend.h5s"),!1;if(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",d.is(this)){var n=t(this).outerHeight();if(s.forcePlaceholderSize&&c.height(r),n>r){var o=n-r,h=t(this).offset().top;if(c.index()<t(this).index()&&i.originalEvent.pageY<h+o)return!1;if(c.index()>t(this).index()&&i.originalEvent.pageY>h+n-o)return!1}e.hide(),t(this)[c.index()<t(this).index()?"after":"before"](c),a.not(c).detach()}else a.is(this)||t(this).children(s.items).length||(a.detach(),t(this).append(c));return!1})})}}(jQuery);