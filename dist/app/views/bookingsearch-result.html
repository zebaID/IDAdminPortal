 <h3>Booking Search Result
</h3>
<style type="text/css">
table th {
    text-align: left !important;
}
</style>
<div class="panel panel-default" style="overflow-x: auto" ng-init = "getSearchHistory()">
    <div class="panel-heading">
        <div class="row">
        <div class="col-sm-6"></div>
            <div class="col-sm-6">
                <div class="col-sm-8">
                </div>
                <div class="col-sm-4">
                   <button class="pull-right btn btn-labeled btn-primary" ng-click="SearchCriteria()">
                        <span class="btn-label"><i class="fa fa-chevron-left"></i>
                           </span>Search Criteria</button>
                           <button ng-show= "available" style="float:right; margin-top: -33px;margin-right: 163px" ng-click="Message1()" class="pull-right btn btn-labeled btn-primary" id=sm1 ng-disabled="count==0"><span class="btn-label"><i class="glyphicon glyphicon-envelope" ></i></span>Send Message</button>
                </div>
            </div>
        </div>
    </div>
    <input type="checkbox" ng-model="selectedAll" style="cursor: pointer;" ng-show= "available" ng-click="selectAllCustomer1();checkAll1(user)" | unique:'user.mobileNumber'> <b ng-show= "available">Select All</b> </input>
    <table ng-table="tableParams3" class="table table-striped table-bordered ng-table-rowselected" show-filter="true">
        <tr ng-repeat="user in $data" ng-show="$data.length > 0" ng-style="user.tripType === 'R' && {'background-color':'#8bb8f1'} || user.tripType === 'O' && {'background-color':'#cfdbe2'}">
        <td  ng-show= "available">
               <input type="checkbox" ng-model="user.Selected" title="'send sms'" name="send" value="" ng-checked="selectedAll" ng-click="selectCustomer1(user.mobileNumber,user.custName)" style="margin-left:auto; margin-right:auto;" />
               <!--| ng-change="sendMsg(user.conuserId)" -->
           </td>
            <td title="'Booking ID'" filter="{ bookingId: 'text'}" sortable="'bookingId'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.bookingId}}</td>
            <td title="'Customer Name'" filter="{ custName: 'text'}" sortable="'custName'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.custName}}</td>
            <td title="'Customer Mobile'" filter="{ mobileNumber: 'text'}" sortable="'mobileNumber'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.mobileNumber}}</td>
            <td title="'Car Type'" filter="{ carType: 'text'}" sortable="'carType'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.carType}}</td>
            <td title="'Duty Type'" filter="{ dutyType: 'text'}" sortable="'dutyType'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.dutyType}}</td>
            <td title="'Trip Type'" filter="{ tripType: 'text'}" sortable="'tripType'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.tripType}}</td>
            <td title="'Reporting Location'" filter="{ reportingLocation: 'text'}" sortable="'reportingLocation'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.reportingLocation}}</td>
            <td title="'Status'" filter="{ status: 'text'}" sortable="'status'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.status}}</td>
            <td title="'Driver Name'" filter="{ drvName: 'text'}" sortable="'drvName'" style="text-transform: capitalize;text-align:left" ng-click="bookingHistoryFunction(user)">{{user.drvName}}</td>
            <td title="'Rating'" filter="{ rating: 'text'}" sortable="'rating'" style="text-align: left;" ng-click="bookingHistoryFunction(user)"><i ng-repeat="i in getNumber(user.rating) track by $index" ng-click ="showList(user.list)"   class="glyphicon ng-scope fa fa-star text-yellow" style="color: salmon;" ng-show ="user.rating>0"></i>
            <i ng-show ="user.rating==0"   ></i> </td>
            <td title="'Reporting Date/Time'" filter="{ reportingDate: 'date'}" sortable="'reportingDate'" style="text-align:left" ng-click="bookingHistoryFunction(user)">{{user.reportingDate | date:'dd/MM/yyyy'}} {{user.reportingTime}}</td>
            <td title="'Relieving Date/Time'" filter="{ releavingDate: 'date'}" sortable="'releavingDate'" style="text-align:left" ng-click="bookingHistoryFunction(user)">{{user.releavingDate | date:'dd/MM/yyyy'}} {{user.releavingTime}}</td>
            <td title="'Driver Share'" filter="{ driverShare: 'number'}" sortable="'driverShare'" style="text-align: right;" ng-click="bookingHistoryFunction(user)">{{user.driverShare}}</td>
            <td title="'ID Share'" filter="{ idShare: 'number'}" sortable="'idShare'" style="text-align: right;" ng-click="bookingHistoryFunction(user)">{{user.idShare}}</td>
            
            <td title="'Total Amount'" filter="{ actualAmt: 'number'}" sortable="'actualAmt'" style="text-align: right;" ng-click="bookingHistoryFunction(user)">{{user.actualAmt}}</td>
            <td title="'PM'" sortable="'paymentMethod'" style="text-align: left;" ng-click="bookingHistoryFunction(user)">{{user.paymentMethod}}</td>
            
        </tr>
        <tr ng-show="$data.length ==a 0">
            <td>No record found</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </table>
</div>

<script type="text/ng-template" id="/bookingHistoryNewBookingModel.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Booking Details
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak ng-init="bookingHistoryGetNewBooking()">
        <div class="row">
            <div class="col-md-4">
                <legend>Customer Details</legend>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0"><strong>Booking ID: {{booking.bookingId}}</strong></label>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0"><strong>Customer Name:</strong></label>
                        <input type="text" id="bookingFirstName" class=" input-hover" style="width: 130px;" ng-model="booking.bookingFirstName" placeholder="First Name" readonly>
                        <span id="bookingCustomerName1" style="color:red"></span>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>&nbsp;</strong>
                        </label>
                        <input type="text" id="bookingLastName" class=" input-hover" style="width: 130px;" ng-model="booking.bookingLastName" placeholder="Last Name" readonly>
                        <span id="bookingCustomerName1" style="color:red"></span>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Contact Number:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingCellNumber" class=" input-hover" style="width: 130px;" ng-model="booking.bookingCellNumber" placeholder="Contact Number" readonly>
                    </div>
                    <div class="col-xs-6">
                       <label class="margin-bottom-0">
                            <strong>Email:</strong>
                        </label>
                        <br/>
                        <input type="text" id="email" class=" input-hover" style="width: 130px;" ng-model="booking.email" readonly>
                    </div>
                    
                </div>
                <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Duty Type:</strong>
                        </label>
                        <br/>
                        <input type="text" id="dutyType" class=" input-hover" style="width: 130px;" ng-model="booking.dutyType" readonly />
                    </div>
                     <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Payment Method:</strong>
                        </label>
                        <br/>
                        <input type="text" id="paymentMethod" class=" input-hover" style="width: 130px;" ng-model="booking.paymentMethod" readonly>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Car Type:</strong> </label>
                        <br/>
                        <input type="text" id="carType" class=" input-hover" style="width: 130px;" ng-model="booking.carType" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Journey Type:</strong>
                        </label>
                        <br/>
                        <input type="text" id="journeyType" class=" input-hover" style="width: 130px;" ng-model="booking.journeyType" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-show="booking.status === 'New Booking'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Date:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingReportingDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingReportingDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover" ng-click="openStart($event)" style="width: 130px;height: 28px;"/>
                        <span id="bookingReportingDate1" style="color:red"></span>


                    </div>
                    <div class="col-xs-6" ng-show="booking.status !== 'New Booking'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Date:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingReportingDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingReportingDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover" style="width: 130px;" readonly/>
                        <span id="bookingReportingDate1" style="color:red"></span>


                    </div>
                    <div class="col-xs-6" ng-show="booking.status === 'New Booking'"> 
                        <label class="margin-bottom-0">
                            <strong>Reporting Time:</strong>
                        </label>
                        <br/>
                        <select ng-model="booking.hours" class="select-hover" id="hours" style=" margin-top: 5px;width: 42px">
                                         <option selected value="">HH</option>
                                        <option value="00">00</option>
                                        <option value="01">01</option>
                                        <option value="02">02</option>
                                        <option value="03">03</option>
                                        <option value="04">04</option>
                                        <option value="05">05</option>
                                        <option value="06">06</option>
                                        <option value="07">07</option>
                                        <option value="08">08</option>
                                        <option value="09">09</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                    </select>
                                    <select ng-model="booking.minutes" class="select-hover" id="minutes" style="margin-top: 5px; width: 42px">
                                       <option selected value="">MM</option>
                                        <option value="00">00</option>
                                        <option value="15">15</option>
                                        <option value="30">30</option>
                                        <option value="45">45</option>
                                    </select>

                        
                         <span id="hours1" style="color:red"></span>
                                <span id="minutes1" style="color:red"></span>
                    </div>

                    <div class="col-xs-6" ng-show="booking.status !== 'New Booking'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Time:</strong>
                        </label>
                        <br/>
                        <input type="text" id="reportingTime" class=" input-hover" style="width: 130px;" ng-model="booking.reportingTime" readonly />
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-hide="booking.status === 'Cancelled'">
                        <strong>Relieving Date:</strong>
                        <br/>
                        <input type="text" id="bookingToDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingToDate" is-open="openToDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " style="width: 130px;height: 28px;" ng-click = "openedToDate($event)"/>
                        <span id="bookingToDate1" style="color:red"></span>
                    </div>
                    <div class="col-xs-6" ng-show="booking.status === 'Cancelled' && booking.dutyType === 'Outstation'">
                        <label class="margin-bottom-0">
                        <strong>Relieving Date:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingToDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.cancelledToDate" is-open="openToDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " style="width: 130px;" readonly/>
                        <span id="bookingToDate1" style="color:red"></span>
                    </div>
                    <div class="col-xs-6" ng-hide="booking.status === 'Cancelled'">
                        <label class="margin-bottom-0">
                            <strong>Releaving Time:</strong>
                        </label>
                        <br/>
                        <select ng-model="booking.tohours" class="select-hover" id="tohours" style=" margin-top: 5px;width: 42px">
                            <option selected value="">HH</option>
                            <option value="00">00</option>
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                        </select>
                        <select ng-model="booking.tominutes" class="select-hover" id="tominutes" style="margin-top: 5px; width: 42px">
                            <option selected value="">MM</option>
                            <option value="00">00</option>
                            <option value="15">15</option>
                            <option value="30">30</option>
                            <option value="45">45</option>
                        </select>
                         <span id="releavingTime1" style="color:red"></span>
                        <span id="toMinutes1" style="color:red"></span>
                    </div>
                    <div class="col-xs-6" ng-show="booking.status === 'Cancelled' && booking.dutyType === 'Outstation'">
                        <label class="margin-bottom-0">
                            <strong>Releaving Time:</strong>
                        </label>
                        <br/>
                        <input type="text" id="releavingTime" class=" input-hover" style="width: 130px;" ng-model="booking.cancelledToTime" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-show="booking.dutyType == 'Outstation'">
                        <label class="margin-bottom-0">
                            <strong>Outstation City:</strong>
                        </label>
                        <br/>
                        <input type="text" id="outstationCity" class=" input-hover" style="width: 130px;" ng-model="booking.outstationCity" placeholder="City Name" readonly/>
                    </div>
                    <div class="col-xs-6" >
                       <label class="margin-bottom-0">
                           <strong>Status:</strong>
                       </label>
                       <br/>
                       <input type="text" id="outstationCity" class=" input-hover" style="width: 130px;" ng-model="booking.status" placeholder="Booking Status" readonly/>
                   </div>
                   <div class="col-xs-6" ng-show="booking.status === 'Cancelled' && booking.dutyType === 'Local'">
                        <label class="margin-bottom-0">
                            <strong>Duty Hours:</strong>
                        </label>
                        <br/>
                        <input type="text" id="localDutyHours" class=" input-hover" style="width: 130px;" ng-model="booking.localDutyHours" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                                <div class="col-xs-6">
                                    <label class="margin-bottom-0">Duty Basis</label>
                                    <br/>
                                    <select class="form-control input-hover" id="dutyBasis" ng-model="booking.dutyBasis" ng-options="ta.desc as ta.desc for ta in dutyArray" style="padding: 0px 16px;height:25px; width: 150px">
                                        <option value="">--Select--</option>
                                    </select>
                                    <span id="dutyBasis1" style="color:red"></span>
                                </div>
                                <div class="col-xs-6"  >
                                    <label class="margin-bottom-0">
                                        <strong>Extra Charges:</strong>
                                    </label>
                                    <br/>
                                      <input type="text" id="extraCharges" class="input-hover" style="width: 150px;" ng-model="booking.extraCharges" placeholder="Extra Charges" numbers-only="numbers-only" />
                                    <span id="extraCharges1" style="color:red"></span>
                                </div>
                               
                                    
                            </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0"><strong>Pickup Landmark:</strong></label>
                        <br/>
                        <input type="text" id="landmark" class=" input-hover" ng-model="booking.landmark" placeholder="Flat No,building No,Society Name" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0">
                            <strong>Pickup Location:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingFrmLocation" class="input-hover" ng-model="booking.bookingFrmLocation" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12" ng-show="booking.journeyType == 'One Way'">
                        <label class="margin-bottom-0">
                            <strong>Drop Location:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingToLocation" class="input-hover" ng-model="booking.bookingToLocation" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0">
                            <strong>Remark:</strong>
                        </label>
                        <br/>
                        <textarea type="text" id="remark" class="input-hover" ng-model="booking.remark"></textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-5" ng-hide="booking.status == 'Cancelled'">
                <div class="col-xs-12">
                    <legend>Invoice Details</legend>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee;">
                            <thead>
                                <tr>
                                    <th>Head</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="fare in bookingFare.invoices[0].invoiceDetails">
                                    <td>{{fare.invoiceSubHeads.invoiceSubHeadName}}<span ng-show="fare.invoiceSubHeads.id==16">{{booking.returnFareAmt}}</span></td>
                                    <td>{{fare.amount.toFixed(2)}}</td>
                                </tr>
                                <tr ng-repeat="fare in bookingFare.invoices" style="background-color: grey; color: white">
                                    <td>Total</td>
                                    <td>{{fare.netAmount.toFixed(2)}}</td>
                                </tr>
                                <tr ng-show="bookingFare.invoices[0].invoiceDetails.length == 0">
                                    <td colspan="2">No record found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-12" ng-if="booking.journeyType == 'One Way' && booking.dutyType == 'Outstation'">
                        <label class="margin-bottom-0"><strong>Travel Back Time: {{booking.returnTime}}</strong></label>
                       
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-12" ng-if="booking.returnFareAmt != 0">
                        <label class="margin-bottom-0"><strong>Return Fare: {{booking.returnFareAmt}} Rs.</strong></label>
                       
                    </div>
                </div> -->
                <div class="col-xs-12 margin-bottom-0">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Driver Share:</strong>
                        </label>
                        <br/>
                        <input type="text" id="driverShare" class=" input-hover" ng-model="booking.driverShare" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>ID Share:</strong>
                        </label>
                        <br/>
                        <input type="text" id="idShare" class=" input-hover" ng-model="booking.idShare" readonly>
                    </div>
                </div>
                 <div class="col-xs-12" ng-show ="booking.history.length > 0" >
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee ;">
                                <thead>
                                    <tr>
                                        <th>
                                            <legend>Allocation History</legend>  </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in booking.history track by $index">
                                        <td>{{item}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
            </div>
            <div class="col-md-5" ng-show="booking.status == 'Cancelled'">
                <div class="col-xs-12">
                    <legend>Cencellation Reason</legend>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-12">
                            <label class="margin-bottom-0">
                                <strong>Cancellation Reason:</strong>
                            </label>
                            <br/>
                            <input type="text" id="cancelReason1" class=" input-hover" ng-model="cancelReason1" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-12">
                            <label class="margin-bottom-0">
                                <strong> Cancellation Comment:</strong>
                            </label>
                            <br/>
                            <textarea id="otherReason" class=" input-hover" ng-model="booking.otherReason" readonly></textarea>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12" ng-show ="booking.history.length > 0" >
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee ;">
                                <thead>
                                    <tr>
                                        <th>
                                            <legend>Allocation History</legend>  </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in booking.history track by $index">
                                        <td>{{item}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
            </div>
            <div class="col-md-3" ng-show="cancelButton">
                <div class="col-xs-12" ng-show="allocateDriver">
                    <legend><a ng-click="allocate()">Allocate Driver</a>
                    </legend>
                </div>
                <div ng-show="searchDriver">
                    <fieldset>
                        <legend>Search Driver</legend>
                        <div class="col-xs-12">
                            <strong>Name/Mobile No:</strong>
                            <h4><angucomplete-alt id="mobileNumber" style="width: 135px;" placeholder="Search by name or mobile" pause="500" initial-value="" input-changed="bookingHistoryNewBookingDriverSelect()" selected-object="search.mobileNumber" local-data="driverMobileList" search-fields="mobileNumber,driverName" title-field="driverSearchData" minlength=1 maxlength=10 input-class=" input-hover" match-class="highlight"></h4>
                        </div>
                        <br>
                        <br>
                        <div class="col-xs-12">
                            <div class="col-xs-12" style="text-align:center">
                                <button class="mb-sm btn btn-success" ng-click="bookingHistoryAllocateDriverFunction()">Allocate Driver</button>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="col-xs-12">
            <div class="col-xs-4"></div>
            <div class="col-xs-4"  style="text-align: center">
                <button class="mb-sm btn" ng-show="cancelButton" style="background-color: white; color: black; border: 2px solid red;" ng-click="CancelBookingPopUp()">Cancel Booking</button>
                <button class="mb-sm btn" ng-show="cancelButton" style="background-color:#4CAF50; color: white; width:120px;  " ng-click="updateDateAndTime(booking)"> Update
                </button>

                <button class="mb-sm btn btn-green" ng-click="bookingHistoryDetails(booking)" ng-hide=""> Booking History
                </button>

            </div>
            <div class="col-xs-4" style="text-align: right">
                <label class="margin-bottom-0">
                            <strong>{{booking.bookingDate}}</strong>
                             <br>
                            <strong>{{booking.bookBy}}</strong>
                        </label>
            </div>
            </div>
        </div>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>
<script type="text/ng-template" id="/StartDutyDatePopup.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Select Date And Time To Start Duty
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak ng-init="getLineUpData()">
        <br> <strong><h4> Select Start Duty Date And Time:</h4></strong>
        <br>
        <label class="margin-bottom-0">
            <strong><h4>Start Duty Date:</h4></strong>
        </label>
        <br/>
        <input type="text" id="bookingReportingDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingReportingDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover" ng-click="openStart($event)" style="width: 135px;height: 28px;" />
        <br/>
        <span id="bookingReportingDate1" style="color:red"></span>
        <br>
        <label class="margin-bottom-0">
            <strong><h4>Start Duty Time:</h4></strong>
        </label>
        <br/>
        <select ng-model="booking.hours" id="hours" class="select-hover" style="    margin-top: 5px;">
            <option selected value="00">00</option>
            <option value="01">01</option>
            <option value="02">02</option>
            <option value="03">03</option>
            <option value="04">04</option>
            <option value="05">05</option>
            <option value="06">06</option>
            <option value="07">07</option>
            <option value="08">08</option>
            <option value="09">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
        </select>
        <select ng-model="booking.minutes" id="minutes" class="select-hover" style="    margin-top: 5px;">
            <option selected value="00">00</option>
            <option value="15">15</option>
            <option value="30">30</option>
            <option value="45">45</option>
        </select>
         <br/>
        <span id="reportingTime1" style="color:red"></span>
        <br>
        <br/>
        <button class="mb-sm btn btn-green" ng-click="startDuty(booking)" ng-hide="startDutyFlag1 == false"> Start Duty
        </button>
        <button class="mb-sm btn btn-green" ng-click="offDuty(booking)" ng-show="offDutyFlag1 == true">Off Duty
        </button>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>
<script type="text/ng-template" id="/OffDutyDatePopup.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Select Date And Time To Off Duty
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak >
        <div class="row">
        <div class="col-xs-12 margin-bottom-10" ng-show="dutyType == 'Outstation'">
            <div class="col-xs-6">
                 <label class="margin-bottom-0">
                <strong>Off Duty Date:</strong>
                </label>
                <br/>
                <input type="text" id="bookingToDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingToDate" is-open="openToDate" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " ng-click="openedToDate($event)" style="width: 135px;height: 28px;" />
                <br/>
                <span id="bookingToDate1" style="color:red"></span>
                </div>

                <div class="col-xs-6">
                 <label class="margin-bottom-0">
                <strong>Off Duty Time</strong>
                </label>
                <br/>
                <select ng-model="booking.tohours" id="bookingReleivingTime" class="select-hover" style="    margin-top: 5px;">
                    <option selected value="00">00</option>
                    <option value="01">01</option>
                    <option value="02">02</option>
                    <option value="03">03</option>
                    <option value="04">04</option>
                    <option value="05">05</option>
                    <option value="06">06</option>
                    <option value="07">07</option>
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                </select>
                <select ng-model="booking.tominutes" id="bookingReleivingTime" class="select-hover" style="margin-top: 5px;">
                    <option selected value="00">00</option>
                    <option value="15">15</option>
                    <option value="30">30</option>
                    <option value="45">45</option>
                </select>
                <br/>
                <span id="bookingReleivingTime1" style="color:red"></span>
                </div>
                
            </div>
            <div class="col-xs-12" ng-show="dutyType != 'Outstation'">
                <div class="col-xs-6">
                 <label class="margin-bottom-0">
                <strong>Off Duty Date:</strong>
                </label>
                <br/>
                <input type="text" id="bookingToDatelocal" datepicker-popup="dd-MM-yyyy" ng-model="booking.toDate" is-open="openToDate" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " ng-click="openedToDate($event)" style="width: 135px;height: 28px;" />
                <br/>
                <span id="bookingToDate1local" style="color:red"></span>
                </div>
                <div class="col-xs-6">
                 <label class="margin-bottom-0">
                <strong>Off Duty Time</strong>
                </label>
                <br/>
                <select ng-model="booking.tohour1" id="bookingReleivingTimelocal" class="select-hover" style="    margin-top: 5px;">
                    <option selected value="00">00</option>
                    <option value="01">01</option>
                    <option value="02">02</option>
                    <option value="03">03</option>
                    <option value="04">04</option>
                    <option value="05">05</option>
                    <option value="06">06</option>
                    <option value="07">07</option>
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                </select>
                <select ng-model="booking.tomin1" id="bookingReleivingTimelocal" class="select-hover" style="margin-top: 5px;">
                    <option selected value="00">00</option>
                    <option value="15">15</option>
                    <option value="30">30</option>
                    <option value="45">45</option>
                </select>
                <br/>
                <span id="bookingReleivingTime1local" style="color:red"></span>
            </div>
            
        </div>
         <div class="col-xs-12 margin-bottom-10" style="margin-bottom: 10px; margin-top: 10px;" ng-show = "journeyType =='One Way'">
        <div class="col-xs-6">
            <label class="margin-bottom-0">
                <strong>Drop Location:</strong>
            </label>
            <br/>
            <input type="text" id="bookingToLocation" class="input-hover" ng-model="offDutyAddress" ng-autocomplete googleplace="">
            <span id="bookingToLocation1" style="color:red"></span>
        </div>
    </div>
    <div class="col-xs-12" style="margin-bottom: 10px; margin-top: 10px;">
                <div class="col-xs-12" style="text-align: center">
                     <button class="mb-sm btn" style="background-color: #4CAF50; color: white; width:120px; " ng-click="bookingHistoryOffDuty(booking,offDutyAddress, journeyType)" ng-disabled="isDisabled">Off Duty
                    </button>
                </div>
            </div>
    </div>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>
<script type="text/ng-template" id="/cancelBookingPopup.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Select Cancellation Reason
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak ng-init="fetchBookingHistoryCancelReason()">
        <h4> Select Cancellation Reason: </h4>
        <select style="width: 100%;padding: 5px" name="Select" ng-init="cancelationReason = bookingHistoryCancelationReasons[0]" ng-model="cancelationReason.id" ng-options="cancelationReason.desc for cancelationReason in bookingHistoryCancelationReasons">
            <option value="">
                <h5>Select</h5> </option>
        </select>
        <br>
        <h4>Comments:</h4>
        <textarea style="width: 100%;padding: 5px;" ng-model="bookingHistoryCancelationReasons.comment">
        </textarea>
        <br>
        <center>
            <button style="text-align: center; margin-bottom: 20px; margin-top: 10px" class="mb-sm btn btn-danger" ng-click="bookingHistorySubmitCancellationReason(cancelationReason.id,comment.desc)">Submit
            </button>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>
<script type="text/ng-template" id="/bookingHistoryLineUpBookingModel.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Booking Details
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak ng-init="getLineUpData()">
        <div class="row">
            <div class="col-md-4">
                <legend>Customer Details</legend>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0"><strong>Booking ID: {{booking.bookingId}}</strong></label>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0"><strong>Customer Name:</strong></label>
                        <input type="text" id="bookingFirstName" class=" input-hover" style="width: 130px;" ng-model="booking.bookingFirstName" placeholder="First Name" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>&nbsp;</strong>
                        </label>
                        <input type="text" id="bookingLastName" class=" input-hover" style="width: 130px;" ng-model="booking.bookingLastName" placeholder="Last Name" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Contact Number:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingCellNumber" class=" input-hover" style="width: 130px;" ng-model="booking.bookingCellNumber" placeholder="Contact Number" readonly/>
                    </div>
                    <div class="col-xs-6">
                       <label class="margin-bottom-0">
                            <strong>Email:</strong>
                        </label>
                        <br/>
                        <input type="text" id="email" class=" input-hover" style="width: 130px;" ng-model="booking.email" readonly>
                    </div>
                    
                </div>
                <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Duty Type:</strong>
                        </label>
                        <br/>
                        <input type="text" id="dutyType" class=" input-hover" style="width: 130px;" ng-model="booking.dutyType" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Payment Method:</strong>
                        </label>
                        <br/>
                        <input type="text" id="paymentMethod" class=" input-hover" style="width: 130px;" ng-model="booking.paymentMethod" readonly>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Car Type:</strong> </label>
                        <br/>
                        <input type="text" id="carType" class=" input-hover" style="width: 130px;" ng-model="booking.carType" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Journey Type:</strong>
                        </label>
                        <br/>
                        <input type="text" id="journeyType" class=" input-hover" style="width: 130px;" ng-model="booking.journeyType" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-show="booking.status === 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Date:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingReportingDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingReportingDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover" ng-click="openStart($event)" style="width: 130px;height: 28px;"/>
                        <span id="bookingReportingDate1" style="color:red"></span>


                    </div>
                    <div class="col-xs-6" ng-show="booking.status !== 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Date:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingReportingDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingReportingDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover" style="width: 130px;height: 28px;" readonly/>
                    </div>
                    <div class="col-xs-6" ng-show="booking.status === 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Time:</strong>
                        </label>
                        <br/>
                        <select ng-model="booking.hours" class="select-hover" id="hours" style=" margin-top: 5px;width: 42px">
                                         <option selected value="">HH</option>
                                        <option value="00">00</option>
                                        <option value="01">01</option>
                                        <option value="02">02</option>
                                        <option value="03">03</option>
                                        <option value="04">04</option>
                                        <option value="05">05</option>
                                        <option value="06">06</option>
                                        <option value="07">07</option>
                                        <option value="08">08</option>
                                        <option value="09">09</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                    </select>
                                    <select ng-model="booking.minutes" class="select-hover" id="minutes" style="margin-top: 5px; width: 42px">
                                       <option selected value="">MM</option>
                                        <option value="00">00</option>
                                        <option value="15">15</option>
                                        <option value="30">30</option>
                                        <option value="45">45</option>
                                    </select>

                        
                         <span id="hours1" style="color:red"></span>
                                <span id="minutes1" style="color:red"></span>
                    </div>

                    <div class="col-xs-6" ng-show="booking.status !== 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Reporting Time:</strong>
                        </label>
                        <br/>
                        <input type="text" id="reportingTime" class=" input-hover" style="width: 130px;" ng-model="booking.reportingTime" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-hide="booking.status === 'Cancelled' || booking.status === 'Done'">
                        <strong>Relieving Date:</strong>
                        <br/>
                        <input type="text" id="bookingToDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingToDate" is-open="openToDate" min-date="minDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " style="width: 130px;height: 28px;" readonly/>
                    </div>

                    <div class="col-xs-6" ng-show="booking.status === 'Done'">
                        <strong>Relieving Date:</strong>
                        <br/>
                        <input type="text" id="bookingToDate" datepicker-popup="dd-MM-yyyy" ng-model="booking.bookingToDate" is-open="openToDate" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" class="input-hover " ng-click="openedToDate($event)" style="width: 130px;height: 28px;" />
                        <span id="bookingToDate1" style="color:red"></span>

                       
                    </div>
                    
                    <div class="col-xs-6" ng-hide="booking.status === 'Cancelled' || booking.status === 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Relieving Time:</strong>
                        </label>
                        <br/>
                        <input type="text" id="releivingTime" class=" input-hover" style="width: 130px;" ng-model="booking.releivingTime" readonly/>
                    </div>

                     <div class="col-xs-6" ng-show="booking.status === 'Done'">
                        <label class="margin-bottom-0">
                            <strong>Relieving Time:</strong>
                        </label>
                        <br/>
                        <select ng-model="booking.tohours" class="select-hover" id="tohours" style=" margin-top: 5px; width: 42px">
                                         <option selected value="">HH</option>
                                        <option value="00">00</option>
                                        <option value="01">01</option>
                                        <option value="02">02</option>
                                        <option value="03">03</option>
                                        <option value="04">04</option>
                                        <option value="05">05</option>
                                        <option value="06">06</option>
                                        <option value="07">07</option>
                                        <option value="08">08</option>
                                        <option value="09">09</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                    </select>
                                    <select ng-model="booking.tominutes" id="tominutes" class="select-hover" style=" margin-top: 5px; width: 42px">
                                        <option selected value="">MM</option>
                                        <option value="00">00</option>
                                        <option value="15">15</option>
                                        <option value="30">30</option>
                                        <option value="45">45</option>
                                    </select>
                                    <span id="tohours1" style="color:red"></span>
                                <span id="tominutes1" style="color:red"></span>
                                 <span id="releavingTime1" style="color:red"></span>
                                
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6" ng-show="booking.dutyType == 'Outstation'">
                        <label class="margin-bottom-0">
                            <strong>Outstation City:</strong>
                        </label>
                        <br/>
                        <input type="text" id="outstationCity" class=" input-hover" style="width: 130px;" ng-model="booking.outstationCity" placeholder="City Name" readonly/>
                    </div>
                    <div class="col-xs-6" >
                       <label class="margin-bottom-0">
                           <strong>Status:</strong>
                       </label>
                       <br/>
                       <input type="text" id="outstationCity" class=" input-hover" style="width: 130px;" ng-model="booking.status" placeholder="Booking Status" readonly/>
                   </div>
                    
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0"><strong>Pickup Landmark:</strong></label>
                        <br/>
                        <input type="text" id="firstName" class=" input-hover" ng-model="booking.landmark" placeholder="Flat No,building No,Society Name" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0">
                            <strong>Pickup Location:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingFrmLocation" class="input-hover" ng-model="booking.bookingFrmLocation" readonly/>
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12" ng-show="booking.journeyType == 'One Way'">
                        <label class="margin-bottom-0">
                            <strong>Drop Location:</strong>
                        </label>
                        <br/>
                        <input type="text" id="bookingToLocation" class="input-hover" ng-model="booking.bookingToLocation" readonly />
                    </div>
                </div>
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-12">
                        <label class="margin-bottom-0">
                            <strong>Remark:</strong>
                        </label>
                        <br/>
                        <textarea type="text" id="remark" class="input-hover" ng-model="booking.remark"></textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="col-xs-12">
                    <legend>Invoice Details</legend>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee;">
                            <thead>
                                <tr>
                                    <th>Head</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="fare in lineFare.invoices[0].invoiceDetails">
                                    <td>{{fare.invoiceSubHeads.invoiceSubHeadName}}<span ng-show="fare.invoiceSubHeads.id==16">{{booking.returnFareAmt}}</span></td>
                                    <td>{{fare.amount.toFixed(2)}}</td>
                                </tr>
                                <tr ng-repeat="fare in lineFare.invoices" style="background-color: grey; color: white">
                                    <td>Total</td>
                                    <td>{{fare.netAmount.toFixed(2)}}</td>
                                </tr>
                                <tr ng-show="lineFare.invoices[0].invoiceDetails.length == 0">
                                    <td colspan="2">No record found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-12" ng-if="booking.journeyType == 'One Way' && booking.dutyType == 'Outstation'">
                        <label class="margin-bottom-0"><strong>Travel Back Time: {{booking.returnTime}}</strong></label>
                       
                    </div>
                </div> -->
               <!-- <div class="col-xs-12 margin-bottom-10">
                <div class="col-xs-12" ng-if="booking.returnFareAmt != 0">
                        <label class="margin-bottom-0"><strong>Return Fare: {{booking.returnFareAmt}} Rs.</strong></label>
                       
                    </div>
                </div> -->
                <div class="col-xs-12 margin-bottom-10">
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>Driver Share:</strong>
                        </label>
                        <br/>
                        <input type="text" id="driverShare" class=" input-hover" ng-model="booking.driverShare" readonly/>
                    </div>
                    <div class="col-xs-6">
                        <label class="margin-bottom-0">
                            <strong>ID Share:</strong>
                        </label>
                        <br/>
                        <input type="text" id="idShare" class=" input-hover" ng-model="booking.idShare" readonly>
                    </div>
                </div>
                <div class="col-xs-12" ng-show ="booking.rating>0">
                    
                   <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee ;">
                            <thead>
                                <tr>
                                    <th><legend>Rating Details</legend> (<i ng-repeat="i in getNumber(booking.rating) track by $index " class="glyphicon ng-scope fa fa-star text-orange" style="color: salmon;" ></i>)</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in booking.list track by $index">
                                    <td>{{item}}</td>
                                    
                                </tr>
                                
                                
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div ng-show="searchDriver">
                    <fieldset>
                        
                        <div class="col-xs-12">
                            <strong>Name/Mobile No:</strong>
                            <h4><angucomplete-alt id="mobileNumber" style="width: 135px;" placeholder="Search by name or mobile" pause="500" initial-value="" input-changed="lineUpmobileSelect()" selected-object="search.mobileNumber" local-data="driverList" search-fields="mobileNumber,driverName" title-field="drvSearchData" minlength=1 maxlength=10 input-class=" input-hover" match-class="highlight"></h4>
                        </div>
                        <br>
                        <br>
                        <div class="col-xs-12">
                            <div class="col-xs-12" style="text-align:center">
                                <button class="mb-sm btn btn-success" ng-click="allocateNewDriverFunction()">Allocate Driver</button>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div ng-hide="searchDriver">
                    <legend>Driver Details</legend>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>Driver Name:</strong>
                            </label>
                            <br/>
                            <input type="text" id="driverFirstName" class=" input-hover" style="width: 130px" ng-model="booking.driverFirstName" placeholder="First Name" readonly/>
                        </div>
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>&nbsp;</strong>
                            </label>
                            <br/>
                            <input type="text" id="driverMiddleName" class=" input-hover" style="width: 130px" ng-model="booking.driverMiddleName" placeholder="Middle Name" readonly/>
                        </div>
                    </div>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>&nbsp;</strong>
                            </label>
                            <br/>
                            <input type="text" id="driverLastName" class=" input-hover" style="width: 130px" ng-model="booking.driverLastName" placeholder="Last Name" readonly/>
                        </div>
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>Driver Contact:</strong>
                            </label>
                            <br/>
                            <input type="text" id="driverContact" class="input-hover" style="width: 130px" ng-model="booking.driverContact" placeholder=" Driver Contact Number" readonly/>
                        </div>
                    </div>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-12">
                            <label class="margin-bottom-0">
                                <strong>Driver Residence Address:</strong>
                            </label>
                            <br/>
                            <input type="text" id="driverAddress" class="input-hover" ng-model="booking.driverAddress" readonly/>
                        </div>
                    </div>
                    <div ng-show="booking.paymentStatus =='Settled'">
                    <legend>Bank Details</legend>
                    <div class="col-xs-12 margin-bottom-10">
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>Settlement Mode:</strong>
                            </label>
                            <br/>
                            <input type="text" id="settlementMode" class=" input-hover" ng-model="booking.settlementMode"readonly/>
                        </div>
                         
                        <div class="col-xs-6">
                            <label class="margin-bottom-0">
                                <strong>Payment Date:</strong>
                            </label>
                            <br/>
                            <input type="text" id="paymentDate" class="input-hover" ng-model="booking.paymentDate" readonly/>
                        </div>
                        
                       
                    </div>

                    
                    <div class="col-xs-12 margin-bottom-10" ng-show="booking.settlementMode =='Bank'">
                       <div class="col-xs-12">
                            <label class="margin-bottom-0">
                                <strong>Bank Name:</strong>
                            </label>
                            <br/>
                            <input type="text" id="bankName" class="input-hover" ng-model="booking.bankName" readonly/>
                        </div>
                    </div>
                    </div>
                    <div class="col-xs-12 margin-bottom-10" ng-show="allocateDriver">
                         
                         <div class="col-xs-6">
                            <button style="padding: 8px;"  class="btn btn-labeled btn-success" ng-click="allocate()">Change Driver
                            
                             
                            </button></div>
                            <div class="col-xs-6">
                            <button  class="btn btn-labeled btn-primary" ng-click="deallocateDriver()" style="padding: 8px;" ng-disabled="isDisabled">Remove Driver
                            </button>
                            </div>
                             
                        </div>
                </div>
                <div class="col-xs-12" ng-show ="booking.history.length > 0" >
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee ;">
                                <thead>
                                    <tr>
                                        <th>
                                            <legend>Allocation History</legend>  </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in booking.history track by $index">
                                        <td>{{item}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
            </div>
            <div class="col-xs-12">
            <div class="col-xs-3"></div>
            <div class="col-xs-6" style="text-align: center">
                <button class="mb-sm btn" style="background-color: white; color: black; border: 2px solid red;" ng-click="CancelBookingPopUp()" ng-show="cancelButton1 == true">Cancel Booking</button>

                <button class="mb-sm btn btn-green" ng-click="updateDateAndTime(booking)" ng-hide="booking.status=='Done'"> Update
                </button>

                <button class="mb-sm btn" style="background-color:#4CAF50; color: white; width:120px;  " ng-click="monitorStartDutyDate(booking)" ng-hide="startDutyFlag1 == false"> Start Duty
                </button>
                <button class="mb-sm btn" style="background-color: #4CAF50; color: white; width:120px;  " ng-click="monitorOffDutyDate(booking)" ng-show="offDutyFlag1 == true">Off Duty
                </button>
                <!--<button class="mb-sm btn" style="background-color: #5d9cec; color: white; width:120px;" ng-click="confirmPaymentMethod1()" ng-disabled="paidDisabledButton1" ng-show="cashButton1 == true">Paid Online
                </button>
                -->

                 <button class="mb-sm btn btn-green" ng-click="bookingHistoryDetails(booking)" ng-hide=""> Booking History
                </button>

                <button class="mb-sm btn" style="background-color: #FF902B; color: white; width:120px;" ng-click="confirmPaymentMethod2()" ng-disabled="paidDisabledButton2" ng-show="cashButton2 == true">Cash By Office
                </button>
                <button class="mb-sm btn" style="background-color: #564aa3; color: white; width:120px;" ng-click="confirmPaymentMethod3()" ng-disabled="paidDisabledButton3" ng-show="cashButton == true">Cash By Driver
                </button>
                <button class="mb-sm btn" style="background-color:#4CAF50; color: white; width:120px;  " ng-click="updateDateAndTime(booking)" ng-show="cashButton2 == true"> Update
                </button>
            </div>
            <div class="col-xs-3" style="text-align: right">
                <label class="margin-bottom-0">
                            <strong>{{booking.bookingDate}}</strong>
                             <br>
                            <strong>{{booking.bookBy}}</strong>
                        </label>
            </div>
            </div>
        </div>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>

<script type="text/ng-template" id="/sendMessage.html">
<div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Send Message
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal1()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak ng-init="">
    <form ng-submit="">
        <div class="row">
        <div class="col-md-10">
         
            <textarea style="margin-left: 162px"rows="5" cols="50" ng-model="sendRequestAdv" id="text1" name="sendRequestAdv" ></textarea required>
            </div>
        </div>
        <div class="row" style="margin-top: 3%;">
            <div class="col-xs-12" style="margin-bottom: 20px;">
                <div class="col-xs-6" style="text-align:right">
                    <button class="btn btn-primary" ng-disabled="!sendRequestAdv" value="" ng-click="sendMessage1(sendRequestAdv)" >Send message</button>
                </div>
                <div class="col-xs-6">
                    <button class="mb-sm btn btn-danger" ng-click="cancel1()">Cancel</button>
                </div>
            </div>
        </div>
        </form>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
    </script>


<script id="/bookingHistoryDetails.html" type="text/ng-template">
        <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
                <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Booking History
                    <div style="float:right; width: 20px;">
                        <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal1()"></span></a>
                    </div>
                </div>
            </div>
            <div class="modal-body" ng-init="historyDetails()">
                
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover" style="border: 1px solid #eeeeee ;">
                            <tbody>
                                <th>Details</th>
                                <th>Reporting Date</th>
                                <th>Reporting Time</th>
                                <th>Relieaving Date</th>
                                <th>Relieaving Time</th>
                                <th>Status</th>
                                <tr ng-repeat="item in BookingDetails">
                                    <td>{{item.description}} {{item.createdDate | date: 'medium'}}</td>
                                    <td>{{item.reportingDate | date: 'dd/MM/yyyy'}}</td>
                                    <td>{{item.reportingTime}}</td>
                                    <td>{{item.releavingDate | date: 'dd/MM/yyyy'}}</td>
                                    <td>{{item.releavingTime}}</td>
                                    <td>{{item.status}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                
            </div>
            <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
            </div>
            </script>



