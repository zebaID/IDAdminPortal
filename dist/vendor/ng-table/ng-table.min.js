!function(e,t){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(e){return t(e)}):t(e)}(angular||null,function(e){"use strict";var t=e.module("ngTable",[]);t.factory("ngTableParams",["$q","$log",function(t,a){var n=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r=function(r,i){var s=this,l=function(){c.debugMode&&a.debug&&a.debug.apply(this,arguments)};this.data=[],this.parameters=function(t,a){if(a=a||!1,e.isDefined(t)){for(var r in t){var i=t[r];if(a&&r.indexOf("[")>=0){for(var s=r.split(/\[(.*)\]/).reverse(),c="",p=0,u=s.length;u>p;p++){var g=s[p];if(""!==g){var m=i;i={},i[c=g]=n(m)?parseFloat(m):m}}"sorting"===c&&(o[c]={}),o[c]=e.extend(o[c]||{},i[c])}else o[r]=n(t[r])?parseFloat(t[r]):t[r]}return l("ngTable: set parameters",o),this}return o},this.settings=function(t){return e.isDefined(t)?(e.isArray(t.data)&&(t.total=t.data.length),c=e.extend(c,t),l("ngTable: set settings",c),this):c},this.page=function(t){return e.isDefined(t)?this.parameters({page:t}):o.page},this.total=function(t){return e.isDefined(t)?this.settings({total:t}):c.total},this.count=function(t){return e.isDefined(t)?this.parameters({count:t,page:1}):o.count},this.filter=function(t){return e.isDefined(t)?this.parameters({filter:t}):o.filter},this.sorting=function(t){if(2==arguments.length){var a={};return a[t]=arguments[1],this.parameters({sorting:a}),this}return e.isDefined(t)?this.parameters({sorting:t}):o.sorting},this.isSortBy=function(t,a){return e.isDefined(o.sorting[t])&&o.sorting[t]==a},this.orderBy=function(){var e=[];for(var t in o.sorting)e.push(("asc"===o.sorting[t]?"+":"-")+t);return e},this.getData=function(t,a){e.isArray(this.data)&&e.isObject(a)?t.resolve(this.data.slice((a.page()-1)*a.count(),a.page()*a.count())):t.resolve([])},this.getGroups=function(a,n){var r=t.defer();r.promise.then(function(t){var r={};e.forEach(t,function(t){var a=e.isFunction(n)?n(t):t[n];r[a]=r[a]||{data:[]},r[a].value=a,r[a].data.push(t)});var i=[];for(var s in r)i.push(r[s]);l("ngTable: refresh groups",i),a.resolve(i)}),this.getData(r,s)},this.generatePagesArray=function(e,t,a){var n,r,i,s,l,o;if(n=11,o=[],l=Math.ceil(t/a),l>1){o.push({type:"prev",number:Math.max(1,e-1),active:e>1}),o.push({type:"first",number:1,active:e>1}),i=Math.round((n-5)/2),s=Math.max(2,e-i),r=Math.min(l-1,e+2*i-(e-s)),s=Math.max(2,s-(2*i-(r-s)));for(var c=s;r>=c;)c===s&&2!==c||c===r&&c!==l-1?o.push({type:"more",active:!1}):o.push({type:"page",number:c,active:e!==c}),c++;o.push({type:"last",number:l,active:e!==l}),o.push({type:"next",number:Math.min(l,e+1),active:l>e})}return o},this.url=function(t){t=t||!1;var a=t?[]:{};for(var n in o)if(o.hasOwnProperty(n)){var r=o[n],i=encodeURIComponent(n);if("object"==typeof r){for(var s in r)if(!e.isUndefined(r[s])&&""!==r[s]){var l=i+"["+encodeURIComponent(s)+"]";t?a.push(l+"="+r[s]):a[l]=r[s]}}else e.isFunction(r)||e.isUndefined(r)||""===r||(t?a.push(i+"="+encodeURIComponent(r)):a[i]=encodeURIComponent(r))}return a},this.reload=function(){var e=t.defer(),a=this;c.$loading=!0,c.groupBy?c.getGroups(e,c.groupBy,this):c.getData(e,this),l("ngTable: reload data"),e.promise.then(function(e){c.$loading=!1,l("ngTable: current scope",c.$scope),a.data=c.groupBy?c.$scope.$groups=e:c.$scope.$data=e,c.$scope.pages=a.generatePagesArray(a.page(),a.total(),a.count()),c.$scope.$emit("ngTableAfterReloadData")})},this.reloadPages=function(){var e=this;c.$scope.pages=e.generatePagesArray(e.page(),e.total(),e.count())};var o=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},c={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData};return this.settings(i),this.parameters(r,!0),this};return r}]);var a=["$scope","ngTableParams","$timeout",function(t,a,n){t.$loading=!1,t.params||(t.params=new a),t.params.settings().$scope=t;var r=function(){var e=0;return function(t,a){n.cancel(e),e=n(t,a)}}();t.$watch("params.$params",function(a,n){t.params.settings().$scope=t,e.equals(a.filter,n.filter)?t.params.reload():r(function(){t.params.$params.page=1,t.params.reload()},t.params.settings().filterDelay)},!0),t.sortBy=function(e,a){var n=t.parse(e.sortable);if(n){var r=t.params.settings().defaultSort,i="asc"===r?"desc":"asc",s=t.params.sorting()&&t.params.sorting()[n]&&t.params.sorting()[n]===r,l=a.ctrlKey||a.metaKey?t.params.sorting():{};l[n]=s?i:r,t.params.parameters({sorting:l})}}}];return t.directive("ngTable",["$compile","$q","$parse",function(t,n,r){return{restrict:"A",priority:1001,scope:!0,controller:a,compile:function(a){var n=[],i=0,s=null,l=a.find("thead");return e.forEach(e.element(a.find("tr")),function(t){t=e.element(t),t.hasClass("ng-table-group")||s||(s=t)}),s?(e.forEach(s.find("td"),function(t){var a=e.element(t);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var s=function(e,t){return function(i){return r(a.attr("x-data-"+e)||a.attr("data-"+e)||a.attr(e))(i,{$columns:n})||t}},l=s("title"," "),o=s("header",!1),c=s("filter",!1)(),p=!1,u=!1;c&&c.$$name&&(u=c.$$name,delete c.$$name),c&&c.templateURL&&(p=c.templateURL,delete c.templateURL),a.attr("data-title-text",l()),n.push({id:i++,title:l,sortable:s("sortable",!1),"class":a.attr("x-data-header-class")||a.attr("data-header-class")||a.attr("header-class"),filter:c,filterTemplateURL:p,filterName:u,headerTemplateURL:o,filterData:a.attr("filter-data")?a.attr("filter-data"):null,show:a.attr("ng-show")?function(e){return r(a.attr("ng-show"))(e)}:function(){return!0}})}}),function(a,i,s){if(a.$loading=!1,a.$columns=n,a.$watch(s.ngTable,function(t){e.isUndefined(t)||(a.paramsModel=r(s.ngTable),a.params=t)},!0),a.parse=function(t){return e.isDefined(t)?t(a):""},s.showFilter&&a.$parent.$watch(s.showFilter,function(e){a.show_filter=e}),e.forEach(n,function(t){var n;if(t.filterData){if(n=r(t.filterData)(a,{$column:t}),!e.isObject(n)||!e.isObject(n.promise))throw new Error("Function "+t.filterData+" must be instance of $q.defer()");return delete t.filterData,n.promise.then(function(a){e.isArray(a)||(a=[]),a.unshift({title:"-",id:""}),t.data=a})}}),!i.hasClass("ng-table")){a.templates={header:s.templateHeader?s.templateHeader:"ng-table/header.html",pagination:s.templatePagination?s.templatePagination:"ng-table/pager.html"};var o=l.length>0?l:e.element(document.createElement("thead")).attr("ng-include","templates.header"),c=e.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});i.find("thead").remove(),i.addClass("ng-table").prepend(o).after(c),t(o)(a),t(c)(a)}}):void 0}}}]),t.directive("ngTablePagination",["$compile",function(t){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(a,n){a.params.settings().$scope.$on("ngTableAfterReloadData",function(){a.pages=a.params.generatePagesArray(a.params.page(),a.params.total(),a.params.count())},!0),a.$watch("templateUrl",function(r){if(!e.isUndefined(r)){var i=e.element(document.createElement("div"));i.attr({"ng-include":"templateUrl"}),n.append(i),t(i)(a)}})}}}]),e.module("ngTable").run(["$templateCache",function(e){e.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> </select>'),e.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> </select>'),e.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),e.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"></div> <div ng-if="template" ng-show="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </th> </tr>'),e.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> ')}]),t});