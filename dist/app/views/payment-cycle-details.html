<h3>Generate Payment Cycle</h3>
<!-- Row Select Example-->
<style type="text/css">
table th {
    text-align: left !important;
} 
</style>
<div class="panel panel-default" style="overflow-x: auto" ng-init="generatePayment()">
    <div class="panel-heading">
        <!-- <div class="row" style="margin-bottom: 10px;">
            <div class="col-sm-8"></div>
            <div class="col-sm-4">
                <button class="pull-right btn btn-labeled btn-primary" ng-click="newUser()">
                    <span class="btn-label"><i class="fa fa-plus"></i>
                           </span> Add New</button>
            </div>
        </div> -->
        <div class="row">
            <div class="col-sm-6">

              <div class="col-sm-2">
                
                 <button class="pull-left btn btn-labeled btn-primary"  style ="padding-top: -2px;
                    padding-bottom: -2px;" ng-click="backTopaymentSection()">
                        <span class="btn-label"><i class="fa fa-chevron-left"></i>
                     </span>
                    Back</button>
                    </div>
                    <div class="col-sm-8">
                    </div>
            </div>
            <div class="col-sm-6">
                <div class="col-sm-8">
                </div>
                

            
            <div class="col-sm-4">
                    <button class="pull-right btn btn-labeled btn-primary"  ng-disabled="count1==0"ng-click="generatePaymentdriverPopup()">
                        <span class="btn-label"><i class="fa fa-plus"></i>
                           </span> Generate </button>
                </div>
            </div>
        </div>
    </div>
     <input type="checkbox" ng-model="selectedAll" style="cursor: pointer;"  ng-click="selectAllCustomer3();checkAll3(payment)" | unique:'payment.bookingId'>  Select All  </input>
    <table ng-table="tableParams3" class="table table-striped table-bordered ng-table-rowselected" show-filter="true">
        <tr ng-repeat="payment in $data track by $index" ng-show="$data .length > 0">
            <!-- | filter:searchName -->
             <td>
               <input type="checkbox" ng-model="payment.Selected" name="send" value="" ng-checked="selectedAll" ng-click="selectCustomer3(payment.bookingId,payment.driverShare)"   />
               <!--| ng-change="sendMsg(user.conuserId)" -->
           </td>

            <td title="'Booking ID'" filter="{ id: 'text'}" sortable="'bookingId'" style="text-transform: capitalize;text-align: left;width: 3%" ng-click="paymentCycleDetailsPage(payment.id,payment.paymentCycleName)">{{payment.bookingId}}</td>
            <!-- <td title="'Driver ID'" filter="{ id: 'text'}" sortable="'driverId'" style="text-transform: capitalize;text-align: left;width: 3%" ng-click="paymentCycleDetailsPage(payment.id,payment.paymentCycleName)">{{payment.driverId}}</td> -->


            <!-- <td title="'Customer Name'" filter="{ custName: 'text'}" sortable="'custName'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.custName}}</td>
            <td title="'Driver Mobile'" filter="{ mobileNumber: 'text'}" sortable="'mobileNumber'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.mobileNumber}}</td> -->
            <td title="'Driver Name'" filter="{ drvName: 'text'}" sortable="'drvName'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.drvName}}</td>
            <td title="'Driver Mobile'" filter="{ mobileNumber: 'text'}" sortable="'mobileNumber'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.drvmobile}}</td>
            <td title="'Car Type'" filter="{ carType: 'text'}" sortable="'carType'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.carType}}</td>
            <td title="'Duty Type'" filter="{ dutyType: 'text'}" sortable="'dutyType'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.dutyType}}</td>
            <td title="'Reporting Location'" filter="{ reportingLocation: 'text'}" sortable="'reportingLocation'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.reportingLocation}}</td>
            <td title="'Status'" filter="{ status: 'text'}" sortable="'status'" style="text-transform: capitalize;text-align:left" ng-click="bookingReportFunction(user)">{{payment.status}}</td>
            
            <td title="'Reporting Date/Time'" filter="{ reportingDate: 'date'}" sortable="'reportingDate'" style="text-align:left" ng-click="bookingReportFunction(user)">{{payment.reportingDate | date:'dd/MM/yyyy'}} {{payment.reportingTime}}</td>
            <td title="'Relieving Date/Time'" filter="{ releavingDate: 'date'}" sortable="'releavingDate'" style="text-align:left" ng-click="bookingReportFunction(user)">{{payment.releavingDate | date:'dd/MM/yyyy'}} {{payment.releavingTime}}</td>
            <td title="'Driver Share'" filter="{ driverShare: 'number'}" sortable="'driverShare'" style="text-align: right;" ng-click="bookingReportFunction(user)">{{payment.driverShare}}</td>
            <td title="'ID Share'" filter="{ idShare: 'number'}" sortable="'idShare'" style="text-align: right;" ng-click="bookingReportFunction(user)">{{payment.idShare}}</td>
            
            <td title="'Total Amount'" filter="{ actualAmt: 'number'}" sortable="'actualAmt'" style="text-align: right;" ng-click="bookingReportFunction(user)">{{payment.actualAmt}}</td>
            <!-- <td title="'PM'" sortable="'paymentMethod'" style="text-align: left;" ng-click="bookingReportFunction(user)">{{payment.paymentMethod}}</td> -->
            <td title="'Driver Payment Status'" filter="{ driverPaymentStatus: 'text'}" sortable="'driverPaymentStatus'" style="text-align: left;" ng-click="bookingReportFunction(user)">{{payment.driverPaymentStatus}}
                
            </td>
        </tr>
        <tr ng-show="$data.length == 0">
            <td>No record found</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </table>
</div>
<script type="text/ng-template" id="/generatePayment.html">
    <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Generate Payment
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak>
        <div class="row margin-bottom-10">
            <div class="col-md-12">
                <div class="row margin-bottom-10">
                    <div class="col-md-12">
                        <div class="col-md-6">
                            <label class="margin-bottom-0">Payment Cycle Name</label>
                            <br/>
                            <input type="text" id="paymentName" ng-model="paymentCycle.paymentName" placeholder="Payment Cycle Name" class="input-hover" />
                            <span id="paymentName1" style="color:red"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="margin-bottom-0">Till Date</label>
                            <br/>
                            <input type="text" id="paymentDate" datepicker-popup="yyyy-MM-dd" ng-model="paymentCycle.paymentDate" is-open="openedStart" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" placeholder="Till Date" class="input-hover" ng-click="openStart($event)" />
                            <span id="paymentDate1" style="color:red"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-6">
                            <label class="margin-bottom-0">Driver Batch</label>
                            <br/>
                            <select class="form-control input-hover" id="driverBatch" ng-model="paymentCycle.driverBatch" ng-options="sa.desc as sa.desc for sa in driverBatchArray" style="padding: 0px 16px;height:25px;">
                                <option value="">--Select Driver Batch--</option>
                            </select>
                            <span id="driverBatch1" style="color:red"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12" style="margin-bottom: 10px;">
            <div class="col-xs-12" style="text-align:center">
                <button class="mb-sm btn btn-success" ng-click="generatePaymentCycle(paymentCycle)">Submit</button>
            </div>
        </div>
    </div>
    </div>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>
<script type="text/ng-template" id="/payment-details-popup.html">
      <div class="modal-header" style="border:-1px;background-color:gainsboro;" ng-cloak>
        <div class="col-xs-12 text-center" style="margin-top: -15px; font-size: 20px;"> Settlement Report
            <div style="float:right; width: 20px;">
                <a style="cursor:pointer;"><span class="fa fa-times" ng-click="closeModal()"></span></a>
            </div>
        </div>
    </div>
    <div class="modal-body" ng-cloak>
        <div ng-init="settlementBookingDetails()">
            <form class="form-horizontal ng-pristine ng-valid">
                <div class="form-group">
                    <div class="row">
                        <div class="col-xs-12" style="padding-bottom: 20px">
                            <div class="col-xs-8"></div>
                            <div class="col-xs-4" style="text-align: right">
                                <button class="btn btn-labeled btn-primary" ng-disabled="count == 0" ng-click="settlementCalculationPopup()">
                                    <h4>Payment Cycle Details</h4></button>
                            </div>
                        </div>
                        <div class="col-xs-12" style="padding-left: 33px; padding-right: 33px;">
                            <table ng-table="tableParams3" class="table table-striped table-bordered ng-table-rowselected" show-filter="true">
                                <tr ng-repeat="user in paymentDriverData track by $index" ng-show="paymentDriverData.length > 0">
                                    <td title="''" style="width: 5%">
                                        <input type="checkbox" name="pv" value="checked" ng-model="checked" id="pv1" ng-change="selectedBookings(user)" style="margin-left:auto; margin-right:auto;">
                                    </td>
                                    <td title="'Driver ID'" style="text-transform: capitalize;text-align:left">{{user.id}}</td>
                                    <td title="'Driver Name'" style="text-transform: capitalize;text-align:left">{{user.driverName}}</td>
                                     <td title="'Bank Name'" style="text-transform: capitalize;text-align:left">{{user.bankName}}</td>
                                     <td title="'Account Number'" style="text-transform: capitalize;text-align:left">{{user.accountNumber}}</td>

                                     <td title="'IFS Code'" style="text-transform: capitalize;text-align:left">{{user.ifscCode}}</td>
                                    <td title="'Driver Payment Status'" style="text-align: center;" ng-click="changePaymentStatus(user.bookingId)">
                                        <div ng-if="user.driverPaymentStatus == 'Hold'">
                                            <i class="fa fa-lock" style="color: #f05050"></i>
                                        </div>
                                        <div ng-if="user.driverPaymentStatus == 'Unsettled'">
                                            <i class="fa fa-unlock" style="color: #5d9cec"></i>
                                        </div>
                                    </td>
                                </tr>
                                <tr ng-show="paymentDriverData.length == 0">
                                    <td>No record found</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer" style="text-align:center;border:-1px;background-color:gainsboro;">
    </div>
</script>